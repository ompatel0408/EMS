CREATE TABLE `USER` (
  `USERID` int NOT NULL AUTO_INCREMENT,
  `NAME` varchar(20) NOT NULL,
  `EMAIL` varchar(40) NOT NULL,
  `PASSWORD` varchar(100) NOT NULL,
  `PHONENUMBER` bigint NOT NULL,
  `DEPARTMENTNAME` varchar(15) NOT NULL,
  `ROLE` int NOT NULL,
  PRIMARY KEY (`USERID`),
  UNIQUE KEY `EMAIL` (`EMAIL`),
  UNIQUE KEY `PHONENUMBER` (`PHONENUMBER`)
) 


CREATE TABLE `VENDORS` (
  `VENDORID` int NOT NULL,
  `VENDORNAME` varchar(30) NOT NULL,
  `ADDRESS` varchar(50) NOT NULL,
  `PHONONUMBER` int NOT NULL,
  `EMAIL` varchar(40) NOT NULL,
  PRIMARY KEY (`VENDORID`)
) 


CREATE TABLE `clients` (
  `clientid` int NOT NULL AUTO_INCREMENT,
  `ClientName` varchar(40) NOT NULL,
  `GSTNO` varchar(20) NOT NULL,
  `PhoneNumber` int NOT NULL,
  `Email` varchar(40) NOT NULL,
  `PanNo` varchar(10) NOT NULL,
  `ADDRESS` varchar(80) NOT NULL,
  PRIMARY KEY (`clientid`)
)



CREATE TABLE `projects` (
  `ProjectId` varchar(20) NOT NULL,
  `ClientPOId` varchar(20) NOT NULL,
  `PODATE` varchar(20) NOT NULL,
  `AdvancePayPercent` int NOT NULL,
  `AfterPayPercent` int NOT NULL,
  `ClientId` int DEFAULT NULL,
  `ProjectName` varchar(60) NOT NULL,
  PRIMARY KEY (`ProjectId`),
  UNIQUE KEY `ClientPOId` (`ClientPOId`),
  KEY `Client_Id` (`ClientId`),
  CONSTRAINT `projects_ibfk_1` FOREIGN KEY (`ClientId`) REFERENCES `Clients` (`clientid`)
) 


CREATE TABLE `EMSCatagory` (
  `CatagoryId` int NOT NULL AUTO_INCREMENT,
  `Catagory` varchar(50) NOT NULL,
  PRIMARY KEY (`CatagoryId`)
)

CREATE TABLE `CatagoryGrade` (
  `gradeId` int NOT NULL AUTO_INCREMENT,
  `CatagoryId` int NOT NULL,
  `grade` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`gradeId`),
  KEY `CatagoryId` (`CatagoryId`),
  CONSTRAINT `catagorygrade_ibfk_1` FOREIGN KEY (`CatagoryId`) REFERENCES `EMSCatagory` (`CatagoryId`)
)

CREATE TABLE `CatagoryGradeSize` (
  `sizeId` int NOT NULL AUTO_INCREMENT,
  `gradeId` int NOT NULL,
  `SIZE` varchar(60) DEFAULT NULL,
  PRIMARY KEY (`sizeId`),
  KEY `gradeId` (`gradeId`),
  CONSTRAINT `catagorygradesize_ibfk_1` FOREIGN KEY (`gradeId`) REFERENCES `CatagoryGrade` (`gradeId`)
)

CREATE TABLE `Drawing` (
  `DrawingId` varchar(30) NOT NULL,
  `ClientDrawing` blob NOT NULL,
  `EMSDrawing` blob NOT NULL,
  PRIMARY KEY (`DrawingId`)
)

CREATE TABLE `PREPURCHASE` (
  `projectId` varchar(20) NOT NULL,
  `DrawingId` varchar(30) NOT NULL,
  PRIMARY KEY (`DrawingId`),
  KEY `projectId` (`projectId`),
  CONSTRAINT `prepurchase_ibfk_1` FOREIGN KEY (`projectId`) REFERENCES `PROJECTS` (`ProjectId`)
)



CREATE TABLE `Quotations` (
  `QuotationId` int NOT NULL AUTO_INCREMENT,
  `ProjectId` varchar(20) DEFAULT NULL,
  `QuotationDate` varchar(15) NOT NULL,
  `QuotationAmount` int DEFAULT NULL,
  `FinalDelivaryDate` varchar(15) DEFAULT NULL,
  `Quantity` int NOT NULL,
  `DiscountPercentage` varchar(10) NOT NULL,
  `DiscountAmount` varchar(10) NOT NULL,
  PRIMARY KEY (`QuotationId`)
) 


CREATE TABLE `quotationPerItem` (
  `ItemCode` varchar(30) NOT NULL,
  `CatagoryId` int NOT NULL,
  `QuotationPerItemQuantity` int NOT NULL,
  `Weights` varchar(25) NOT NULL,
  `Units` varchar(10) NOT NULL,
  `Price` varchar(30) NOT NULL,
  `ProfitPercentage` varchar(20) NOT NULL,
  `TotalPricePerItem` varchar(30) NOT NULL,
  KEY `ItemCode` (`ItemCode`),
  KEY `CatagoryId` (`CatagoryId`),
  CONSTRAINT `quotationperitem_ibfk_2` FOREIGN KEY (`ItemCode`) REFERENCES `ITEMS` (`ITEMCODE`),
  CONSTRAINT `quotationperitem_ibfk_3` FOREIGN KEY (`CatagoryId`) REFERENCES `EMSCatagory` (`CatagoryId`)
) 


CREATE TABLE `ProfitInQuotationPerItem` (
  `ItemCode` varchar(30) DEFAULT NULL,
  `TotalAmountWithoutProfit` varchar(30) NOT NULL,
  `TotalAmountWithProfit` varchar(30) NOT NULL,
  UNIQUE KEY `ItemCode` (`ItemCode`),
  CONSTRAINT `profitinquotationperitem_ibfk_1` FOREIGN KEY (`ItemCode`) REFERENCES `QuotationPerItem` (`ItemCode`)
) 


CREATE TABLE `ITEMS` (
  `ProjectId` varchar(20) DEFAULT NULL,
  `ITEMCODE` varchar(30) NOT NULL,
  `ITEMNAME` varchar(30) DEFAULT NULL,
  `TotalPrice` varchar(20) NOT NULL,
  `QUANTITY` int NOT NULL,
  `QuotationId` int DEFAULT NULL,
  `TagNo` varchar(50) NOT NULL,
  `DeliveryDate` date NOT NULL,
  `DrawingId` varchar(30) DEFAULT NULL,
  `Remarks` varchar(200) NOT NULL,
  UNIQUE KEY `ITEMCODE` (`ITEMCODE`),
  KEY `PID` (`ProjectId`),
  KEY `QuotationId` (`QuotationId`),
  KEY `DrawingId` (`DrawingId`),
  CONSTRAINT `items_ibfk_1` FOREIGN KEY (`ProjectId`) REFERENCES `PROJECTS` (`ProjectId`),
  CONSTRAINT `items_ibfk_4` FOREIGN KEY (`QuotationId`) REFERENCES `Quotations` (`QuotationId`),
  CONSTRAINT `items_ibfk_5` FOREIGN KEY (`DrawingId`) REFERENCES `PREPURCHASE` (`DrawingId`)
)



CREATE TABLE `INDENT` (
  `INDENTID` int NOT NULL,
  `PROJECTID` varchar(40) NOT NULL,
  `ITEMCATAGORY` varchar(10) NOT NULL,
  `ITEMNAME` varchar(50) NOT NULL,
  `QUANTITY` int NOT NULL,
  `UOM` varchar(12) NOT NULL,
  `Remarks` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`INDENTID`),
  KEY `PROJECTID` (`PROJECTID`),
  CONSTRAINT `indent_ibfk_1` FOREIGN KEY (`PROJECTID`) REFERENCES `PROJECTS` (`ProjectId`)
)



CREATE TABLE `POSTPURCHASE` (
  `ProductDescription` varchar(30) NOT NULL,
  `Size` varchar(35) NOT NULL,
  `Quantity` int NOT NULL,
  `Uom` varchar(15) NOT NULL,
  `RatePerKg` varchar(15) NOT NULL,
  `discount` int NOT NULL,
  `netAmount` varchar(30) NOT NULL,
  `SGST` int NOT NULL,
  `CGST` int NOT NULL,
  `IndentId` int DEFAULT NULL,
  `CurrentDate` date NOT NULL,
  `PONumber` int NOT NULL,
  UNIQUE KEY `PONumber` (`PONumber`),
  KEY `IndentId` (`IndentId`),
  CONSTRAINT `postpurchase_ibfk_1` FOREIGN KEY (`IndentId`) REFERENCES `Indent` (`INDENTID`)
) 

CREATE TABLE `ORDERHISTORY` (
  `PID` varchar(20) NOT NULL,
  `PONumber` varchar(20) NOT NULL,
  KEY `PID` (`PID`),
  CONSTRAINT `orderhistory_ibfk_1` FOREIGN KEY (`PID`) REFERENCES `projects` (`ProjectId`)
) 


CREATE TABLE `GRN` (
  `GRNID` int NOT NULL AUTO_INCREMENT,
  `VENDORNAME` varchar(40) NOT NULL,
  `ReceiveDate` date NOT NULL,
  PRIMARY KEY (`GRNID`)
) 


CREATE TABLE `STORE` (
  `StoreId` int NOT NULL,
  `ProjectId` varchar(20) NOT NULL,
  `QUANTITY` int NOT NULL,
  `CatagoryId` int NOT NULL,
  `GradeId` int NOT NULL,
  `SizeId` int NOT NULL,
  PRIMARY KEY (`StoreId`),
  KEY `PID` (`ProjectId`),
  CONSTRAINT `store_ibfk_1` FOREIGN KEY (`ProjectId`) REFERENCES `projects` (`ProjectId`)
)


CREATE TABLE `ISSUE` (
  `PID` varchar(20) NOT NULL,
  `IssueDate` date NOT NULL,
  `ProductName` varchar(50) NOT NULL,
  `Quantity` int NOT NULL,
  `PersonName` varchar(20) NOT NULL,
  `ContractorName` varchar(20) NOT NULL,
  KEY `PID` (`PID`),
  CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`PID`) REFERENCES `projects` (`ProjectId`)
) 


CREATE TABLE `Production` (
  `ProjectId` varchar(20) NOT NULL,
  `Remarks` varchar(50) NOT NULL,
  `WorkDonePercentage` int NOT NULL,
  KEY `PID` (`ProjectId`),
  CONSTRAINT `production_ibfk_1` FOREIGN KEY (`ProjectId`) REFERENCES `projects` (`ProjectId`)
)